/*!
  * vue-hub v0.0.0 - A Vue plugin for managing and spawning views detached from the vue-router
  * (c) 2021 Victornpb
  * @license MIT
  */
/*!
  * vue-hub v0.0.0 - A Vue plugin for managing and spawning views detached from the vue-router
  * (c) 2021 Victornpb
  * @license MIT
  */
let t=0;class e{constructor(t){this.options=t,this._registeredComponents=Object.fromEntries(t.components.map(t=>[t.name,t])),this._instances=[]}async open(t,e){const n=await this.create(t,e);return this.push(n),n}async create(e,n){console.log("[ComponentManager]","create","args",e,n);const s=this._registeredComponents[e];if(s){const e={id:++t,name:s.name,Component:s.component,node:null,alive:!1,arguments:{...n}};return console.log("[ComponentManager]","create",e),e}console.error("Unknown Component!",e)}push(t){this._instances.push(t)}remove(t){const e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1)}getInstanceById(t){return this._instances.find(e=>e.id===t)}}var n={inheritAttrs:!1,props:{},data:()=>({items:[]}),created(){this.items=this.$vtwm._instances},render(t){return t("div",this.items.map(e=>{const n=t(e.Component,{props:{id:e.id,...e.arguments.props},attrs:{"data-id":e.id},on:e.arguments.on});return e.node=n,n}))},__file:"src/Renderer.vue"},s={inheritAttrs:!1,props:{name:String,id:Number,keep:Boolean},data:()=>({instance:null}),async created(){this.id&&(this.instance=this.$vtwm.getInstanceById(this.id)),this.instance||(this.instance=await this.$vtwm.create(this.name,{props:this.$attrs,on:this.$listeners}),this.$vtwm.push(this.instance),this.$emit("update:id",this.instance.id)),this.$attrs.foo=123},destroyed(){this.keep||this.$vtwm.remove(this.instance)},render:t=>null};s.__file="src/Proxy.vue",e.install=function(t,e){t.component("Renderer",n),t.component("Proxy",s),t.mixin({beforeCreate(){const t=this.$options.windowManager;t?(this.$root._vtwm=t,window.v=t):this._rootWindowManager=this.$parent&&this.$parent._rootWindowManager||this},destroyed(){}}),Object.defineProperty(t.prototype,"$vtwm",{get(){return this.$root._vtwm}})};export default e;